# 获取用户列表

```python
#!/usr/bin/python
import requests

from login_falcon import login_falcon

falcon_url = 'http://falcon.example.cn:8080/api/v1/user/users'

def get_user_list(data):
    '''获取系统中的用户列表'''
    if data['code'] != 200:
        print('open-falcon 登陆失败')
        return data['code']
    else:
        data = data['data']

    tokens = "{\"name\":\"" + data['name'] + "\",\"sig\":\"" + data['sig'] + "\"}"
    headers = {
        "Content-Type": "application/json",
        "Apitoken": tokens,
        'X-Forwarded-For': '127.0.0.1',
    }
    resp = requests.get(falcon_url, headers=headers)
    if resp.status_code == 200:
        return {'code': resp.status_code, 'data': resp.text}
    else:
        return {'code': resp.status_code, 'data': []}
    
if __name__ == '__main__':
    data = login_falcon()
    result = get_user_list(data)

    if result['code'] != 200:
        print('获取用户列表失败')
    else:
        print(result['data'])
```



